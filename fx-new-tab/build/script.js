const e="https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/",t="https://icon.horse/icon/",n={currency:{name:"currency_name_",value:"currency_value_"},shortcut:{link:"link_",name:"name_",img:"img_"},note:{note:"note_",input:"note_input_"}};let o={};function r(){s(),i(),L()||b()||U()?(x(),I(),R()):m(),q(),H(),j()}async function a(){o=JSON.parse(localStorage.getItem("save"))??{}}function c(){localStorage.setItem("save",JSON.stringify(o))}function i(){document.body.style.cssText+=`\n\t\tbackground-image: ${o.bg_img??"none"};\n\t\tbackground-color: ${o.bg_color??"#000000"};\n\t`}async function s(){if(null==o.shortcuts){const e=document.getElementById("loading");e.innerText="Finding Shortcuts Please Wait...",o.shortcuts=await l(),c(),e.innerText=""}const e=w(),t=y(),n=g(),r=document.getElementById("shortcut");r.hidden=!1;const a=f();r.classList.add(a);const i=r.getElementsByTagName("a")[0];if(i.classList.replace("m-0",p()),"none"!=t&&i.classList.add(t),n){const e=r.getElementsByTagName("img")[0];e.classList.replace("rounded-3","rounded-circle"),e.parentElement.classList.remove("card-header"),i.classList.add("rounded-circle");r.getElementsByTagName("h7")[0].remove()}const s=r.parentElement;s.classList.add(_(),E(),h());for(let t=0;t<o.shortcuts.length;t++){var d=o.shortcuts[t];if(null==d||0==d.link.length)continue;const a=r.cloneNode(!0),c=a.getElementsByTagName("a")[0];if(c.classList.add(e[t%4]),c.href=d.link,!n){const e=a.getElementsByTagName("h7")[0];d.name?e.innerText=d.name:e.hidden=!0}s.appendChild(a);const i=a.getElementsByTagName("img")[0];""!=d.img?i.src=d.img:u(t,i)}r.remove(),s.parentElement.classList.add(h(),E())}async function l(){return[{name:"",link:"https://github.com/enfyna",img:""},{name:"",link:"https://github.com/enfyna",img:""},{name:"",link:"https://github.com/enfyna",img:""},{name:"",link:"https://github.com/enfyna",img:""},{name:"",link:"https://addons.mozilla.org/en-US/firefox/addon/fx-new-tab/",img:""},{name:"",link:"https://addons.mozilla.org/en-US/firefox/addon/fx-new-tab/",img:""},{name:"",link:"https://addons.mozilla.org/en-US/firefox/addon/fx-new-tab/",img:""},{name:"",link:"https://addons.mozilla.org/en-US/firefox/addon/fx-new-tab/",img:""}]}async function u(e,t){try{const n=await d(o.shortcuts[e].link),r=n.headers.get("Content-Type");if("image/svg+xml"==r)throw new Error("Cant display SVG file");const a=await n.blob(),i=URL.createObjectURL(a);let s=new Image;s.onload=()=>{var n=document.createElement("canvas");n.width=s.width,n.height=s.height,n.getContext("2d").drawImage(s,0,0);var a=n.toDataURL(r);o.shortcuts[e].img=a,t.src=a,c()},s.src=i}catch(r){console.log(r);let a=document.createElement("canvas"),i=a.getContext("2d");a.width=256,a.height=256,i.fillStyle="#442288aa",i.fillRect(0,0,256,256),i.font="bold 160px monospace",i.textAlign="center",i.fillStyle="white",i.textBaseline="middle",i.fillText(o.shortcuts[e].link.replace("https://","").replace("http://","").replace("www.","").toUpperCase().slice(0,2),a.width/2,a.height/2);var n=a.toDataURL();t.src=n,o.shortcuts[e].img=n,c()}}async function d(e){if(0==navigator.onLine)throw new Error("No internet connection. Cant get favicon.");if(!e.startsWith("http"))throw new Error("Invalid URL format");e=e.split("/")[2];const n=await Promise.race([fetch(t.concat(e),{method:"GET",mode:"cors"}),new Promise(((e,t)=>setTimeout((()=>t({status:408})),4e3)))]);if(408==n.status)throw new Error("HTTP request timed out.");if(200!=n.status)throw new Error("HTTP request failed");return n}function m(){document.getElementById("ShortcutContainer").parentElement.classList.replace("col-md-8","col-md-12"),document.getElementById("NCContainer").remove()}function g(){return"circle"==o.shortcut_shape}function f(){return o.shortcut_width??"col-sm-3"}function h(){return o.shortcut_v_align??"align-items-center"}function p(){return o.shortcut_size??"m-0"}function y(){return o.shortcut_transition??"glow"}function w(){return o.shortcut_col_colors??["bg-primary","bg-danger","bg-success","bg-warning"]}function E(){return o.shortcut_container_h_align??"justify-content-center"}function _(){return o.shortcut_container_width??"col-md-10"}function v(){return null!=o.notes||(o.notes=[{note:""},{note:""},{note:""},{note:""}],c()),o.notes}function b(){return o.is_notes_enabled??!0}function x(){if(b()){var e=v();for(let r=0;r<4;r++){var t=document.getElementById(n.note.note+r);t.innerText=e[r].note,t.hidden=!1;var o=document.getElementById(n.note.input+r);t.addEventListener("click",(()=>{var e=document.getElementById(n.note.note+r),t=document.getElementById(n.note.input+r);t.value=e.innerText,e.hidden=!0,t.hidden=!1,t.focus()})),["change","blur"].forEach((e=>{o.addEventListener(e,(()=>{T(r)}))}))}}else document.getElementById("notes").remove()}function T(e){var t=document.getElementById(n.note.note+e),r=document.getElementById(n.note.input+e);r.value=r.value.trim(),o.notes[e].note=r.value,t.innerText=r.value,r.hidden=!0,t.hidden=!1,c()}function S(){return null!=o.currencies||(o.currencies=[{name:"USD",rate:"-"},{name:"EUR",rate:"-"},{name:"GBP",rate:"-"}],c()),o.currencies}function k(){return o.base_currency??"TRY"}function L(){return o.is_currency_rates_enabled??!0}function B(){const e=o.date??"0",t=Date.now();return t-parseInt(e)>432e5&&(o.date=t,c(),!0)}async function I(){if(!L())return;const e=S();let t=B();if(!t)for(let n=0;n<e.length;n++)"-"==e[n].rate&&(t=!0);if(t)try{const t=await N();for(let n=0;n<3;n++){const o=e[n];o.rate=(1/t[o.name.toLowerCase()]).toFixed(2)}o.currencies=e,c()}catch(e){console.log(e)}const n=document.getElementById("currencies"),r=n.getElementsByClassName("card"),a=n.getElementsByTagName("h5"),i=n.getElementsByTagName("p"),s=C();for(let t=0;t<3;t++){const n=e[t];r[t].classList.add(s),a[t].innerText=n.name,i[t].innerText=n.rate}n.classList.replace("d-none","d-list")}function N(){return new Promise(((t,n)=>{if(0==navigator.onLine)return n("No internet connection. Cant get currency rates.");const o=k().toLowerCase(),r=new XMLHttpRequest;r.onreadystatechange=()=>{if(4==r.readyState){if(200==r.status){const e=JSON.parse(r.responseText)[o];return t(e)}return n("HTTP request failed")}},r.ontimeout=()=>n("Request timed out"),r.open("GET",e.concat(o,".min.json?",Date.now().toString()),!0),r.timeout=5e3,r.send()}))}function C(){return o.currency_container_color??"bg-primary"}function U(){return o.is_clock_enabled??!0}function R(){const e=document.getElementById("clock");if(!U())return;e.classList.add(z());const t=P();function n(){const n=new Date;e.innerText=t.replace("yy",n.getFullYear().toString().slice(2,4)).replace("mm",(n.getMonth()+1).toString().padStart(2,"0")).replace("dd",n.getDate().toString().padStart(2,"0")).replace("h",n.getHours().toString().padStart(2,"0")).replace("m",n.getMinutes().toString().padStart(2,"0")).replace("s",n.getSeconds().toString().padStart(2,"0")).replace("&n","\n")}n(),setInterval(n,1e3)}function z(){return o.clock_color??"text-white"}function P(){return o.clock_format??"h:m"}function D(){return o.is_firefox_watermark_enabled??!0}function q(){if(!D())return;const e=document.getElementById("firefox_watermark");e.classList.add(G()),e.classList.replace("d-none","d-flex")}function G(){return o.firefox_watermark_color??"text-danger"}function H(){const e=document.getElementById("nav-button");e.addEventListener("click",(()=>{location.href="settings.html"})),e.hidden=!1}function j(){const e=[{name:"note-input",tr:"KÄ±sa bir not giriniz",en:"Enter a brief note",de:"Geben Sie eine kurze Notiz ein",es:"Ingresa una nota breve"}];let t;switch(navigator.language.toLowerCase().split("-")[0]){case"tr":t="tr";break;case"de":t="de";break;case"es":t="es";break;default:t="en"}for(const n of e){const e=n.name,o=n[t];if("note-input"==e)for(const t of document.getElementsByName(e))t.placeholder=o;else for(const t of document.getElementsByName(e))t.innerText=o}}a().then(r);